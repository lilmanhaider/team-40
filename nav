<!DOCTYPE html>
<html>
<head>
<style>
nav{
  width:100%;
  padding:16px 8%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  background:white;
  border-bottom:1px solid #eee;
  position:sticky;
  top:0;
  z-index:999;
}

nav .logo{
  display:flex;
  align-items:center;
  gap:10px;
}

nav .logo img{
  height:55px;
  width:auto;
}

nav ul{
  margin-left:auto;
  display:flex;
  gap:30px;
  list-style:none;
  align-items:center;
}

nav ul li a, nav ul li span{
  text-decoration:none;
  color:#444;
  font-size:1rem;
  transition:.3s;
  display:flex;
  align-items:center;
  gap:4px;
  cursor:pointer;
}

nav ul li a:hover,
nav ul li span:hover{
  color:#0077ff;
}

.nav-icon{
  font-size:1.2rem;
}

.popup-overlay{
  display:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.4);
  justify-content:center;
  align-items:center;
  z-index:1000;
}

.popup-box{
  background:white;
  padding:30px;
  border-radius:10px;
  width:320px;
  max-height:80vh;
  overflow-y:auto;
  text-align:left;
}

/* button*/
.popup-box button{
  padding:8px 10px;
  margin-top:10px;
  border:none;
  background:#0077ff;
  color:white;
  border-radius:6px;
  cursor:pointer;
  font-size:0.95rem;
}

.popup-box button:hover{
  background:#005fcc;
}

.close-btn{
  width:100%;
  background:#ccc !important;
}

/*layout of the cart*/
#cart-items{
  margin-top:10px;
  border-top:1px solid #eee;
  padding-top:10px;
}

.cart-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
  padding-bottom:8px;
  border-bottom:1px solid #f1f1f1;
  font-size:0.95rem;
}

.cart-item-info{
  display:flex;
  flex-direction:column;
}

.cart-item-controls{
  display:flex;
  align-items:center;
  gap:5px;
}

.qty-btn{
  width:26px;
  height:26px;
  border-radius:4px;
  padding:0;
}

.qty-display{
  min-width:20px;
  text-align:center;
}

#cart-total{
  margin-top:10px;
  font-weight:bold;
  text-align:right;
  font-size:0.95rem;
}

#cart-empty{
  margin-top:10px;
  font-style:italic;
  color:#777;
}

.product{
  border:1px solid #eee;
  padding:10px;
  margin:15px 8%;
  border-radius:8px;
}
.product button{
  margin-top:5px;
}
</style>
</head>
<body>

<nav>
  <div class="logo">  
    <img src="" alt="Tech4ForU Logo">
  </div>

  <ul>
    <li><a href="ProductPage.html">Product Page</a></li>
    <li><a href="AboutUs.html">About Us</a></li>

    <li><span id="account-btn">Account</span></li>

    <li>
      <span id="cart-btn">
        <span class="nav-icon">ðŸ›’</span>
        Cart
      </span>
    </li>
  </ul>
</nav>

<!-- acount Popup -->
<div id="account-popup" class="popup-overlay">
  <div class="popup-box">
    <h2>Account</h2>
    <p>Please choose an option:</p>

    <button onclick="window.location='login.php'">Log In</button>
    <button onclick="window.location='register.php'">Register</button>

    <button id="close-account" class="close-btn">Close</button>
  </div>
</div>

<!--cart popup-->
<div id="cart-popup" class="popup-overlay">
  <div class="popup-box">
    <h2>Your Cart</h2>

    <p id="cart-empty">Your cart is empty.</p>
    <div id="cart-items"></div>
    <div id="cart-total"></div>

    <button id="close-cart" class="close-btn">Close</button>
  </div>
</div>

<script>
//Popups
document.getElementById("account-btn").onclick = () => {
  document.getElementById("account-popup").style.display = "flex";
};
document.getElementById("close-account").onclick = () => {
  document.getElementById("account-popup").style.display = "none";
};

const cartPopup   = document.getElementById("cart-popup");
const cartBtn     = document.getElementById("cart-btn");
const closeCart   = document.getElementById("close-cart");
const cartItemsEl = document.getElementById("cart-items");
const cartEmptyEl = document.getElementById("cart-empty");
const cartTotalEl = document.getElementById("cart-total");

cartBtn.onclick = () => {
  cartPopup.style.display = "flex";
  renderCart();
};
closeCart.onclick = () => {
  cartPopup.style.display = "none";
};

let cart = {};

// add product to cart when pressed
function addToCart(id, name, price){
  if (!cart[id]) {
    cart[id] = {
      id: id,
      name: name,
      price: parseFloat(price),
      quantity: 0
    };
  }
  cart[id].quantity++;
  renderCart();
}

// change number of products (+ / -)
function changeQuantity(id, delta){
  if (!cart[id]) return;
  cart[id].quantity += delta;
  if (cart[id].quantity <= 0){
    delete cart[id]; // remove product if quantity goes to 0
  }
  renderCart();
}

function renderCart(){
  cartItemsEl.innerHTML = "";
  let ids = Object.keys(cart);

  if (ids.length === 0){
    cartEmptyEl.style.display = "block";
    cartTotalEl.textContent = "";
    return;
  }

  cartEmptyEl.style.display = "none";

  let total = 0;

  ids.forEach(id => {
    const item = cart[id];
    total += item.price * item.quantity;

    const div = document.createElement("div");
    div.className = "cart-item";
    div.dataset.id = id;

    div.innerHTML = `
      <div class="cart-item-info">
        <span><strong>${item.name}</strong></span>
        <span>Â£${item.price.toFixed(2)} each</span>
      </div>
      <div class="cart-item-controls">
        <button class="qty-btn" data-action="decrease">-</button>
        <span class="qty-display">${item.quantity}</span>
        <button class="qty-btn" data-action="increase">+</button>
      </div>
    `;

    cartItemsEl.appendChild(div);
  });

  cartTotalEl.textContent = "Total: Â£" + total.toFixed(2);
}

// handle add or remove (+/-)
cartItemsEl.addEventListener("click", function(e){
  const btn = e.target;
  if (!btn.classList.contains("qty-btn")) return;

  const action = btn.getAttribute("data-action");
  const itemDiv = btn.closest(".cart-item");
  const id = itemDiv.dataset.id;

  if (action === "increase") changeQuantity(id, +1);
  if (action === "decrease") changeQuantity(id, -1);
});

// buttons for adding stuff to cart
document.querySelectorAll(".add-to-cart").forEach(btn => {
  btn.addEventListener("click", () => {
    const id    = btn.getAttribute("data-id");
    const name  = btn.getAttribute("data-name");
    const price = btn.getAttribute("data-price");
    addToCart(id, name, price);
  });
});
</script>

</body>
</html>
